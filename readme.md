Распределитель нагрузки

Задача:
Написать веб-сервис, распределяющий нагрузку между N веб сервисами равномерно. Если один из веб сервисов перестает отвечать, то исключить его из массива веб сервисов и распределять нагрузку между N-1 сервисами. 
Нагрузкой для каждого сервиса является количество запросов, находящихся у него в обработке. Относительно этого числа распределение должно быть равномерным. 

На выходе у вас должен получиться HTTP прокси сервер, который равномерно распределит нагрузку между N сервисами. 


Требования к ЯП: -
Требования к развертке: Docker
Требования к конфигурации: список веб сервисов с их адресами прописать в отдельном конфигурационном файле. 


Шаги тестирования: 
1) Поднять минимум 5 сервисов таргетов 
2) Поднять сервис распределитель 
3) Запустить скрипт спама запросами 
4) Каждые 10 секунд каждый из сервисов-таргетов должен логировать текущее количество запросов в обработке 
5) На 100-ой секунде отключить один из сервисов-таргетов 
6) На 200-ой включить его обратно 
По итогу тестирования лог файлы таргетов должны свидетельствовать о равномерном распределении нагрузки, в момент отключения таргета n, таргеты N-1 должны разделить между собой нагрузку. В момент включения таргета n, таргеты N должны освободить часть нагрузки под поднявшийся таргет. 

-----------------------------------

Как запустить, поиграться и т.д.
Задание выполнялось на ubuntu 20.04, Docker version 20.10.12, build 20.10.12-0ubuntu2~20.04.1, docker-compose version 1.29.2, build 5becea4c.
В корне проекта содержиться файл run.sh, который выполняет docker-compose up --build. docker-compose состоит из 3 сервисов. Proxy, redis и окружение для тестирования (target-сервис; скрипт проверки кол-ва обрабатываемых запросов; shell-скрипт, поднимающий 5 экземпляров target-сервиса, также запускающий скрипт проверки количества обрабатываемых запросов и shell-скрипт, выполняющий запросы к proxy-сервису).
Чтобы всё запутить достаточно зайти в корень проекта и сделать:
1) sudo chmod u+x run.sh
2) ./run.sh
